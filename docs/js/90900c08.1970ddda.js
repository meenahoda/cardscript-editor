(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["90900c08"],{2366:function(t,e){for(var i=[],a=0;a<256;++a)i[a]=(a+256).toString(16).substr(1);function o(t,e){var a=e||0,o=i;return[o[t[a++]],o[t[a++]],o[t[a++]],o[t[a++]],"-",o[t[a++]],o[t[a++]],"-",o[t[a++]],o[t[a++]],"-",o[t[a++]],o[t[a++]],"-",o[t[a++]],o[t[a++]],o[t[a++]],o[t[a++]],o[t[a++]],o[t[a++]]].join("")}t.exports=o},be56:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-toolbar",{staticClass:"bg-primary text-white"},[i("q-toolbar-title",{staticClass:"text-caption"},[t._v(t._s(t.loadedCardId))]),i("q-btn",{staticClass:"q-mr-sm",attrs:{label:"new",outline:"",dense:"",size:"sm"},on:{click:t.newCardscript}}),i("q-btn",{staticClass:"q-mr-sm",attrs:{label:"save",outline:"",dense:"",size:"sm"},on:{click:t.saveCardscript}}),i("q-btn",{staticClass:"q-mr-sm",attrs:{label:"import",outline:"",dense:"",size:"sm"},on:{click:function(e){t.importDialog.show=!0}}}),Object.keys(t.cards).length>0?i("q-btn",{staticClass:"q-mr-sm",attrs:{label:"load",outline:"",dense:"",size:"sm"},on:{click:function(e){t.loadDialogShow=!0}}}):t._e()],1),i("div",{staticClass:"row items-start"},[i("div",{staticClass:"col q-pa-xs"},[i("q-card",[i("q-card-section",[i("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Meta")]),i("q-input",{attrs:{label:"Title"},model:{value:t.cardscript.templateMeta.title,callback:function(e){t.$set(t.cardscript.templateMeta,"title",e)},expression:"cardscript.templateMeta.title"}})],1),i("q-separator"),i("q-card-section",[i("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Body")]),i("q-list",[i("draggable",{attrs:{handle:".drag-handle",options:{animation:150}},model:{value:t.cardscriptBody,callback:function(e){t.cardscriptBody=e},expression:"cardscriptBody"}},t._l(t.cardscriptBody,(function(e,a){return i("q-item",{key:a,attrs:{dense:""}},[i("q-item-section",{attrs:{side:""}},[i("q-icon",{staticClass:"drag-handle",staticStyle:{cursor:"move"},attrs:{color:"grey-8",name:"drag_indicator"}})],1),i("q-item-section",[i("q-item-label",[t._v(t._s(e.type))]),i("q-item-label",{attrs:{caption:"",lines:1}},[t._v(t._s(t.getComponentCaption(e)))])],1),i("q-item-section",{attrs:{side:""}},[i("div",{staticClass:"text-grey-8 q-gutter-xs"},[i("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"settings"},on:{click:function(i){return t.editComponent(e,a,"body")}}}),i("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(e){return t.deleteComponent(a,"body")}}})],1)])],1)})),1)],1)],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:"Add",color:"primary"},on:{click:t.addBody}})],1),i("q-separator"),i("q-card-section",[i("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Actions")]),i("q-list",[i("draggable",{attrs:{handle:".drag-handle",options:{animation:150}},model:{value:t.cardscriptActions,callback:function(e){t.cardscriptActions=e},expression:"cardscriptActions"}},t._l(t.cardscriptActions,(function(e,a){return i("q-item",{key:a,attrs:{dense:""}},[i("q-item-section",{attrs:{side:""}},[i("q-icon",{staticClass:"drag-handle",staticStyle:{cursor:"move"},attrs:{color:"grey-8",name:"drag_indicator"}})],1),i("q-item-section",[i("q-item-label",[t._v(t._s(e.type))]),i("q-item-label",{attrs:{caption:"",lines:1}},[t._v(t._s(t.getComponentCaption(e)))])],1),i("q-item-section",{attrs:{side:""}},[i("div",{staticClass:"text-grey-8 q-gutter-xs"},[i("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"settings"},on:{click:function(i){return t.editComponent(e,a,"actions")}}}),i("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(e){return t.deleteComponent(a,"actions")}}})],1)])],1)})),1)],1)],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:"Add",color:"primary"},on:{click:t.addActions}})],1)],1),i("add-component-dialog",{attrs:{show:t.addDialogShow,arrayEditing:t.arrayEditing},on:{add:t.addComponent,cancel:function(e){t.addDialogShow=!1}}}),i("edit-component-dialog",{attrs:{show:t.editDialog.show,arrayEditing:t.arrayEditing,index:t.editDialog.idx,component:t.editDialog.component},on:{save:t.editComponentSave,close:function(e){t.editDialog.show=!1}}})],1),i("div",{staticClass:"col q-pa-xs"},[i("q-card",[i("q-card-section",[i("q-input",{ref:"viewJSON",attrs:{value:JSON.stringify(t.cardscript,null,2),type:"textarea",rows:"7",readonly:""}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:"Copy",color:"primary"},on:{click:t.copyToClipboard}},[i("q-tooltip",[t._v("Copy to clipboard")])],1)],1)],1)],1),i("div",{staticClass:"col q-pa-xs"},[i("q-card",[i("q-card-section",[i("cardscript-component",{key:t.componentKey,attrs:{cardscript:t.cardscript}})],1)],1)],1)]),i("q-dialog",{attrs:{persistent:""},model:{value:t.importDialog.show,callback:function(e){t.$set(t.importDialog,"show",e)},expression:"importDialog.show"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Import")])]),i("q-card-section",[i("q-input",{attrs:{label:"Paste your Cardscript JSON here",type:"textarea",rows:"7"},model:{value:t.importDialog.cardscript,callback:function(e){t.$set(t.importDialog,"cardscript",e)},expression:"importDialog.cardscript"}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:"Cancel",color:"primary",outline:""},on:{click:function(e){t.importDialog.show=!1}}}),i("q-btn",{attrs:{label:"Import",color:"primary"},on:{click:t.importCardscript}})],1)],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:t.loadDialogShow,callback:function(e){t.loadDialogShow=e},expression:"loadDialogShow"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Load")])]),i("q-card-section",[i("q-list",t._l(t.cards,(function(e,a){return i("q-item",{key:a,attrs:{clickable:""},on:{click:function(i){return t.loadCardscript(a,e)}}},[i("q-item-section",[i("q-item-label",[t._v(t._s(t.getTitle(e)))]),i("q-item-label",{attrs:{caption:""}},[t._v(t._s(a))])],1)],1)})),1)],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:"Cancel",color:"primary",outline:""},on:{click:function(e){t.loadDialogShow=!1}}})],1)],1)],1)],1)},o=[],n=(i("ac6a"),i("cadf"),i("06db"),i("456d"),i("f751"),i("310e")),r=i.n(n),s=i("ec35"),c=i("d192"),d=i("8f9d"),l=i("c437"),p={name:"Editor",components:{cardscriptComponent:s["a"],draggable:r.a,AddComponentDialog:c["a"],EditComponentDialog:d["a"]},data:function(){return{componentKey:0,componentKeySavedAt:0,loadedCardId:null,cardId:null,addDialogShow:!1,arrayEditing:null,editDialog:{show:!1,idx:null,component:{}},importDialog:{show:!1,cardscript:"{}"},loadDialogShow:!1}},watch:{cardscript:{handler:function(){this.componentKey+=1},deep:!0}},computed:{cards:function(){return this.$store.state.app.cards},cardscript:{get:function(){return this.$store.state.app.cardscript},set:function(t){this.$store.commit("app/setCardscript",t)}},cardscriptBody:{get:function(){return this.$store.state.app.cardscript.body},set:function(t){var e=Object.assign({},this.cardscript);e.body=t,this.cardscript=e}},cardscriptActions:{get:function(){return this.$store.state.app.cardscript.actions},set:function(t){var e=Object.assign({},this.cardscript);e.actions=t,this.cardscript=e}}},methods:{copyToClipboard:function(){this.$refs["viewJSON"].select(),document.execCommand("copy"),this.$q.notify({color:"positive",message:"Copied to clipboard."})},addBody:function(){this.addDialogShow=!0,this.arrayEditing="body"},addActions:function(){this.addDialogShow=!0,this.arrayEditing="actions"},addComponent:function(t){t&&this.arrayEditing&&(this.$store.commit("app/addComponent",{type:t,array:this.arrayEditing,$cardscript:this.$cardscript}),this.addDialogShow=!1,this.componentKey+=1)},editComponent:function(t,e,i){this.editDialog.show=!0,this.editDialog.idx=e,this.arrayEditing=i,this.editDialog.component=t},editComponentSave:function(t){this.$store.commit("app/editComponent",{idx:this.editDialog.idx,array:this.arrayEditing,component:t}),this.editDialog.show=!1,this.componentKey+=1},deleteComponent:function(t,e){var i=this;this.$q.dialog({title:"Confirm",message:"Are you sure you want to remove this component?",cancel:!0,persistent:!0}).onOk((function(){i.$store.commit("app/deleteComponent",{idx:t,array:e}),i.componentKey+=1}))},newCardscript:function(){var t=this,e=function(){t.loadedCardId=null,t.$store.commit("app/resetCardscript"),t.componentKey+=1};null===this.loadedCardId?this.$q.dialog({title:"Confirm",message:"You have un-saved changes. Are you sure you want to start a new cardscript?",cancel:!0,persistent:!0}).onOk((function(){e()})):e()},saveCardscript:function(){var t;this.loadedCardId?t=this.loadedCardId:(t=l(),this.loadedCardId=t),this.$store.commit("app/setCardId",t),this.$store.commit("app/saveCurrentCard"),this.componentKeySavedAt=this.componentKey,this.$q.notify({color:"positive",message:"Saved."})},importCardscript:function(){this.loadedCardId=null,this.cardscript=JSON.parse(this.importDialog.cardscript),this.componentKey+=1,this.importDialog.show=!1,this.importDialog.cardscript="{}"},loadCardscript:function(t,e){this.cardscript=e,this.componentKey+=1,this.loadDialogShow=!1,this.loadedCardId=t},getTitle:function(t){return t.templateMeta&&t.templateMeta.title?t.templateMeta.title:""},getComponentCaption:function(t){return t.id?t.id:t.title?t.title:t.text?t.text:void console.log(Object.keys(t))}},mounted:function(){this.cardId=this.$route.params.cardId;var t=this.cards[this.cardId];t&&(this.cardscript=t)}},u=p,m=i("2877"),g=Object(m["a"])(u,a,o,!1,null,null,null);e["default"]=g.exports},c437:function(t,e,i){var a,o,n=i("e1f4"),r=i("2366"),s=0,c=0;function d(t,e,i){var d=e&&i||0,l=e||[];t=t||{};var p=t.node||a,u=void 0!==t.clockseq?t.clockseq:o;if(null==p||null==u){var m=n();null==p&&(p=a=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==u&&(u=o=16383&(m[6]<<8|m[7]))}var g=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:c+1,y=g-s+(h-c)/1e4;if(y<0&&void 0===t.clockseq&&(u=u+1&16383),(y<0||g>s)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=g,c=h,o=u,g+=122192928e5;var f=(1e4*(268435455&g)+h)%4294967296;l[d++]=f>>>24&255,l[d++]=f>>>16&255,l[d++]=f>>>8&255,l[d++]=255&f;var q=g/4294967296*1e4&268435455;l[d++]=q>>>8&255,l[d++]=255&q,l[d++]=q>>>24&15|16,l[d++]=q>>>16&255,l[d++]=u>>>8|128,l[d++]=255&u;for(var v=0;v<6;++v)l[d+v]=p[v];return e||r(l)}t.exports=d},d192:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Add Component")])]),i("q-card-section",[i("q-select",{attrs:{options:t.typeOptions[t.arrayEditing],label:"Type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{label:"Cancel",color:"primary",outline:""},on:{click:function(e){return t.$emit("cancel")}}}),i("q-btn",{attrs:{label:"Add",color:"primary"},on:{click:function(e){return t.$emit("add",t.type)}}})],1)],1)],1)},o=[],n=(i("ac6a"),i("cadf"),i("06db"),i("456d"),i("55dd"),{name:"ComponentAddDialog",props:{show:Boolean,arrayEditing:String},data:function(){return{type:null,typeOptions:{body:Object.keys(this.$cardscript["body"]).filter((function(t){return"Tab"!==t})).sort(),actions:Object.keys(this.$cardscript["actions"]).sort()}}}}),r=n,s=i("2877"),c=Object(s["a"])(r,a,o,!1,null,null,null);e["a"]=c.exports},e1f4:function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var a=new Uint8Array(16);t.exports=function(){return i(a),a}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}}}]);