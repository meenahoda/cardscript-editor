(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{1:function(t,a){},"8f9d":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("q-card",{staticStyle:{"min-width":"350px"}},[e("q-card-section",[e("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("\n        Edit Component / "+t._s(t.component.type)+"\n      ")])]),e("q-card-section",[e(t.getComponent(t.component.type),{tag:"component",attrs:{data:t.component},on:{input:t.inputChanged}})],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Close",color:"primary",outline:""},on:{click:function(a){return t.$emit("close")}}}),e("q-btn",{attrs:{label:"Save",color:"primary"},on:{click:function(a){return t.$emit("save",t.clonedComponent)}}})],1)],1)],1)},o=[],s={name:"ComponentEditDialog",props:{show:Boolean,index:Number,arrayEditing:String,component:Object},data(){return{clonedComponent:{}}},methods:{getComponent(t){if(t&&this.arrayEditing){const a=this.$cardscript[this.arrayEditing][t];if(a)return a.component;console.warn(`Cannot find component: '${this.arrayEditing}/${t}'`)}},inputChanged(t){this.clonedComponent=t}}},n=s,r=e("2877"),c=e("24e8"),d=e("f09f"),l=e("a370"),p=e("4b7e"),m=e("9c40"),h=e("eebe"),u=e.n(h),g=Object(r["a"])(n,i,o,!1,null,null,null);a["a"]=g.exports;u()(g,"components",{QDialog:c["a"],QCard:d["a"],QCardSection:l["a"],QCardActions:p["a"],QBtn:m["a"]})},be56:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("q-toolbar",{staticClass:"bg-primary text-white"},[e("q-toolbar-title",{staticClass:"text-caption"},[t._v(t._s(t.loadedCardId))]),e("q-btn",{staticClass:"q-mr-sm",attrs:{label:"new",outline:"",dense:"",size:"sm"},on:{click:t.newCardscript}}),e("q-btn",{staticClass:"q-mr-sm",attrs:{label:"save",outline:"",dense:"",size:"sm"},on:{click:t.saveCardscript}}),e("q-btn",{staticClass:"q-mr-sm",attrs:{label:"import",outline:"",dense:"",size:"sm"},on:{click:function(a){t.importDialog.show=!0}}}),Object.keys(t.cards).length>0?e("q-btn",{staticClass:"q-mr-sm",attrs:{label:"load",outline:"",dense:"",size:"sm"},on:{click:function(a){t.loadDialogShow=!0}}}):t._e()],1),e("div",{staticClass:"row items-start"},[e("div",{staticClass:"col q-pa-xs"},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Meta")]),e("q-input",{attrs:{label:"Title"},model:{value:t.cardscript.templateMeta.title,callback:function(a){t.$set(t.cardscript.templateMeta,"title",a)},expression:"cardscript.templateMeta.title"}})],1),e("q-separator"),e("q-card-section",[e("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Body")]),e("q-list",[e("draggable",{attrs:{handle:".drag-handle",options:{animation:150}},model:{value:t.cardscriptBody,callback:function(a){t.cardscriptBody=a},expression:"cardscriptBody"}},t._l(t.cardscriptBody,(function(a,i){return e("q-item",{key:i,attrs:{dense:""}},[e("q-item-section",{attrs:{side:""}},[e("q-icon",{staticClass:"drag-handle",staticStyle:{cursor:"move"},attrs:{color:"grey-8",name:"drag_indicator"}})],1),e("q-item-section",[e("q-item-label",[t._v(t._s(a.type))]),e("q-item-label",{attrs:{caption:"",lines:1}},[t._v(t._s(t.getComponentCaption(a)))])],1),e("q-item-section",{attrs:{side:""}},[e("div",{staticClass:"text-grey-8 q-gutter-xs"},[e("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"settings"},on:{click:function(e){return t.editComponent(a,i,"body")}}}),e("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(a){return t.deleteComponent(i,"body")}}})],1)])],1)})),1)],1)],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Add",color:"primary"},on:{click:t.addBody}})],1),e("q-separator"),e("q-card-section",[e("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Actions")]),e("q-list",[e("draggable",{attrs:{handle:".drag-handle",options:{animation:150}},model:{value:t.cardscriptActions,callback:function(a){t.cardscriptActions=a},expression:"cardscriptActions"}},t._l(t.cardscriptActions,(function(a,i){return e("q-item",{key:i,attrs:{dense:""}},[e("q-item-section",{attrs:{side:""}},[e("q-icon",{staticClass:"drag-handle",staticStyle:{cursor:"move"},attrs:{color:"grey-8",name:"drag_indicator"}})],1),e("q-item-section",[e("q-item-label",[t._v(t._s(a.type))]),e("q-item-label",{attrs:{caption:"",lines:1}},[t._v(t._s(t.getComponentCaption(a)))])],1),e("q-item-section",{attrs:{side:""}},[e("div",{staticClass:"text-grey-8 q-gutter-xs"},[e("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"settings"},on:{click:function(e){return t.editComponent(a,i,"actions")}}}),e("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(a){return t.deleteComponent(i,"actions")}}})],1)])],1)})),1)],1)],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Add",color:"primary"},on:{click:t.addActions}})],1)],1),e("add-component-dialog",{attrs:{show:t.addDialogShow,arrayEditing:t.arrayEditing},on:{add:t.addComponent,cancel:function(a){t.addDialogShow=!1}}}),e("edit-component-dialog",{attrs:{show:t.editDialog.show,arrayEditing:t.arrayEditing,index:t.editDialog.idx,component:t.editDialog.component},on:{save:t.editComponentSave,close:function(a){t.editDialog.show=!1}}})],1),e("div",{staticClass:"col q-pa-xs"},[e("q-card",[e("q-card-section",[e("q-input",{ref:"viewJSON",attrs:{value:JSON.stringify(t.cardscript,null,2),type:"textarea",rows:"7",readonly:""}})],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Copy",color:"primary"},on:{click:t.copyToClipboard}},[e("q-tooltip",[t._v("Copy to clipboard")])],1)],1)],1)],1),e("div",{staticClass:"col q-pa-xs"},[e("q-card",[e("q-card-section",[e("cardscript-component",{key:t.componentKey,attrs:{cardscript:t.cardscript}})],1)],1)],1)]),e("q-dialog",{attrs:{persistent:""},model:{value:t.importDialog.show,callback:function(a){t.$set(t.importDialog,"show",a)},expression:"importDialog.show"}},[e("q-card",{staticStyle:{"min-width":"350px"}},[e("q-card-section",[e("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Import")])]),e("q-card-section",[e("q-input",{attrs:{label:"Paste your Cardscript JSON here",type:"textarea",rows:"7"},model:{value:t.importDialog.cardscript,callback:function(a){t.$set(t.importDialog,"cardscript",a)},expression:"importDialog.cardscript"}})],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Cancel",color:"primary",outline:""},on:{click:function(a){t.importDialog.show=!1}}}),e("q-btn",{attrs:{label:"Import",color:"primary"},on:{click:t.importCardscript}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.loadDialogShow,callback:function(a){t.loadDialogShow=a},expression:"loadDialogShow"}},[e("q-card",{staticStyle:{"min-width":"350px"}},[e("q-card-section",[e("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Load")])]),e("q-card-section",[e("q-list",t._l(t.cards,(function(a,i){return e("q-item",{key:i,attrs:{clickable:""},on:{click:function(e){return t.loadCardscript(i,a)}}},[e("q-item-section",[e("q-item-label",[t._v(t._s(t.getTitle(a)))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(i))])],1)],1)})),1)],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Cancel",color:"primary",outline:""},on:{click:function(a){t.loadDialogShow=!1}}})],1)],1)],1)],1)},o=[],s=e("b76a"),n=e.n(s),r=e("ec35"),c=e("d192"),d=e("8f9d");const{v1:l}=e("e144");var p={name:"Editor",components:{cardscriptComponent:r["a"],draggable:n.a,AddComponentDialog:c["a"],EditComponentDialog:d["a"]},data(){return{componentKey:0,componentKeySavedAt:0,loadedCardId:null,cardId:null,addDialogShow:!1,arrayEditing:null,editDialog:{show:!1,idx:null,component:{}},importDialog:{show:!1,cardscript:"{}"},loadDialogShow:!1}},watch:{cardscript:{handler(){this.componentKey+=1},deep:!0}},computed:{cards(){return this.$store.state.app.cards},cardscript:{get(){return this.$store.state.app.cardscript},set(t){this.$store.commit("app/setCardscript",t)}},cardscriptBody:{get(){return this.$store.state.app.cardscript.body},set(t){const a=Object.assign({},this.cardscript);a.body=t,this.cardscript=a}},cardscriptActions:{get(){return this.$store.state.app.cardscript.actions},set(t){const a=Object.assign({},this.cardscript);a.actions=t,this.cardscript=a}}},methods:{copyToClipboard(){this.$refs["viewJSON"].select(),document.execCommand("copy"),this.$q.notify({color:"positive",message:"Copied to clipboard."})},addBody(){this.addDialogShow=!0,this.arrayEditing="body"},addActions(){this.addDialogShow=!0,this.arrayEditing="actions"},addComponent(t){t&&this.arrayEditing&&(this.$store.commit("app/addComponent",{type:t,array:this.arrayEditing,$cardscript:this.$cardscript}),this.addDialogShow=!1,this.componentKey+=1)},editComponent(t,a,e){this.editDialog.show=!0,this.editDialog.idx=a,this.arrayEditing=e,this.editDialog.component=t},editComponentSave(t){this.$store.commit("app/editComponent",{idx:this.editDialog.idx,array:this.arrayEditing,component:t}),this.editDialog.show=!1,this.componentKey+=1},deleteComponent(t,a){this.$q.dialog({title:"Confirm",message:"Are you sure you want to remove this component?",cancel:!0,persistent:!0}).onOk((()=>{this.$store.commit("app/deleteComponent",{idx:t,array:a}),this.componentKey+=1}))},newCardscript(){const t=()=>{this.loadedCardId=null,this.$store.commit("app/resetCardscript"),this.componentKey+=1};null===this.loadedCardId?this.$q.dialog({title:"Confirm",message:"You have un-saved changes. Are you sure you want to start a new cardscript?",cancel:!0,persistent:!0}).onOk((()=>{t()})):t()},saveCardscript(){let t;this.loadedCardId?t=this.loadedCardId:(t=l(),this.loadedCardId=t),this.$store.commit("app/setCardId",t),this.$store.commit("app/saveCurrentCard"),this.componentKeySavedAt=this.componentKey,this.$q.notify({color:"positive",message:"Saved."})},importCardscript(){this.loadedCardId=null,this.cardscript=JSON.parse(this.importDialog.cardscript),this.componentKey+=1,this.importDialog.show=!1,this.importDialog.cardscript="{}"},loadCardscript(t,a){this.cardscript=a,this.componentKey+=1,this.loadDialogShow=!1,this.loadedCardId=t},getTitle(t){return t.templateMeta&&t.templateMeta.title?t.templateMeta.title:""},getComponentCaption(t){return t.id?t.id:t.title?t.title:t.text?t.text:void console.log(Object.keys(t))}},mounted(){this.cardId=this.$route.params.cardId;const t=this.cards[this.cardId];t&&(this.cardscript=t)}},m=p,h=e("2877"),u=e("65c6"),g=e("6ac5"),y=e("9c40"),C=e("f09f"),b=e("a370"),q=e("27f9"),v=e("eb85"),x=e("1c1c"),f=e("66e5"),w=e("4074"),D=e("0016"),k=e("0170"),S=e("4b7e"),_=e("05c0"),$=e("24e8"),Q=e("eebe"),E=e.n(Q),A=Object(h["a"])(m,i,o,!1,null,null,null);a["default"]=A.exports;E()(A,"components",{QToolbar:u["a"],QToolbarTitle:g["a"],QBtn:y["a"],QCard:C["a"],QCardSection:b["a"],QInput:q["a"],QSeparator:v["a"],QList:x["a"],QItem:f["a"],QItemSection:w["a"],QIcon:D["a"],QItemLabel:k["a"],QCardActions:S["a"],QTooltip:_["a"],QDialog:$["a"]})},d192:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{attrs:{persistent:""},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("q-card",{staticStyle:{"min-width":"350px"}},[e("q-card-section",[e("div",{staticClass:"text-caption text-uppercase text-grey"},[t._v("Add Component")])]),e("q-card-section",[e("q-select",{attrs:{options:t.typeOptions[t.arrayEditing],label:"Type"},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}})],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Cancel",color:"primary",outline:""},on:{click:function(a){return t.$emit("cancel")}}}),e("q-btn",{attrs:{label:"Add",color:"primary"},on:{click:t.add}})],1)],1)],1)},o=[],s=(e("4e82"),{name:"ComponentAddDialog",props:{show:Boolean,arrayEditing:String},data(){return{type:null,typeOptions:{body:Object.keys(this.$cardscript["body"]).filter((t=>"Tab"!==t)).sort(),actions:Object.keys(this.$cardscript["actions"]).sort()}}},methods:{add(){this.$emit("add",this.type),this.type=null}}}),n=s,r=e("2877"),c=e("24e8"),d=e("f09f"),l=e("a370"),p=e("ddd8"),m=e("4b7e"),h=e("9c40"),u=e("eebe"),g=e.n(u),y=Object(r["a"])(n,i,o,!1,null,null,null);a["a"]=y.exports;g()(y,"components",{QDialog:c["a"],QCard:d["a"],QCardSection:l["a"],QSelect:p["a"],QCardActions:m["a"],QBtn:h["a"]})}}]);